syntax = "proto3";

package leaderboard.v1;

// A player's best score record.
message ScoreEntry {
  string player_name = 1;  // max 20 chars, ASCII recommended
  int64  score = 2;        // non-negative
  string updated_at = 3;   // RFC3339 timestamp
}

// Subscribe to real-time leaderboard updates.
// Server sends an initial snapshot (top N), then incremental changes as they happen.
message SubscribeRequest {
  int32 initial_limit = 1; // default 10
}

message LeaderboardUpdate {
  enum Kind {
    KIND_UNSPECIFIED = 0;
    SNAPSHOT = 1; // initial full list
    UPSERT   = 2; // a player's best improved or was inserted
    DELETE   = 3; // optional: if admin deleted a player
  }
  Kind kind = 1;
  repeated ScoreEntry snapshot = 2; // used when kind == SNAPSHOT
  ScoreEntry changed = 3;           // used when kind == UPSERT or DELETE
}
